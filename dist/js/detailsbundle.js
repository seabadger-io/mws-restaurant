"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _newArrowCheck(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var requestCache;!function(){function s(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function o(n,r,i){var o,e=new Promise(function(e,t){s(o=n[r].apply(n,i)).then(e,t)});return e.request=o,e}function e(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function t(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return o(this[n],e,arguments)})})}function n(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function r(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=o(e,n,arguments)).then(function(e){if(e)return new a(e,t.request)});var e,t})})}function i(e){this._index=e}function a(e,t){this._cursor=e,this._request=t}function c(e){this._store=e}function h(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function u(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new h(n)}function l(e){this._db=e}e(i,"_index",["name","keyPath","multiEntry","unique"]),t(i,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(i,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(a,"_cursor",["direction","key","primaryKey","value"]),t(a,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(a.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),s(t._request).then(function(e){if(e)return new a(e,t._request)})})})}),c.prototype.createIndex=function(){return new i(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new i(this._store.index.apply(this._store,arguments))},e(c,"_store",["name","keyPath","indexNames","autoIncrement"]),t(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(c,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},e(h,"_tx",["objectStoreNames","mode"]),n(h,"_tx",IDBTransaction,["abort"]),u.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},e(u,"_db",["name","version","objectStoreNames"]),n(u,"_db",IDBDatabase,["deleteObjectStore","close"]),l.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},e(l,"_db",["name","version","objectStoreNames"]),n(l,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[c,i].forEach(function(e){e.prototype[o.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],r=this._store||this._index,i=r[o].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}}})}),[i,c].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(i.push(e.value),void 0===n||i.length!=n?e.continue():t(i)):t(i)})})})});var d={open:function(e,t,n){var r=o(indexedDB,"open",[e,t]),i=r.request;return i.onupgradeneeded=function(e){n&&n(new u(i.result,e.oldVersion,i.transaction))},r.then(function(e){return new l(e)})},delete:function(e){return o(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=d,module.exports.default=module.exports):self.idb=d}();var retryInProgress=0;"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(e){_newArrowCheck(this,this),console.log("SW Registration successful. Scope is "+e.scope),requestCache=new ObjectCache("failedRequests",!0),navigator.serviceWorker.addEventListener("message",function(e){_newArrowCheck(this,this),"request_failed"===e.data.message&&(requestCache.put(e.data.request),showToaster("Some of your changes could not be saved","Retry",runRetryRequests),retryIfOnline())}.bind(this)),document.addEventListener("readystatechange",function(){_newArrowCheck(this,this),"complete"===document.readyState&&requestCache.getAll().then(function(e){_newArrowCheck(this,this),e.length&&showToaster("There are unsaved changes","Save",runRetryRequests)}.bind(this))}.bind(this))}.bind(void 0)).catch(function(e){_newArrowCheck(this,this),console.log("SW Registration failed with "+e)}.bind(void 0));var retryIfOnline=function(){_newArrowCheck(this,this),setTimeout(function(){_newArrowCheck(this,this),navigator.onLine?runRetryRequests():retryIfOnline()}.bind(this),2e3)}.bind(void 0),runRetryRequests=function(){_newArrowCheck(this,this),1===++retryInProgress&&(showToaster("Retrying requests, please wait...",null,null),retryRequests().then(function(e){_newArrowCheck(this,this),e?showToaster("Your changes were successfully stored. Reload the page to see the latest changes","Reload",function(){_newArrowCheck(this,this),window.location.reload()}.bind(this)):(showToaster("Some of your changes could not be saved","Retry",runRetryRequests),retryIfOnline()),retryInProgress=0}.bind(this)))}.bind(void 0),showToaster=function(e,t,n){_newArrowCheck(this,this);var r=document.querySelector("#toaster");if(null!==r){r.querySelector("#toaster-message").innerHTML=e;var i=r.querySelector("#toaster-button").querySelector("a");null!==t?(i.innerHTML=t,i.classList.remove("waiting")):(i.innerHTML="Ok",i.classList.add("waiting")),i.onclick=n,r.style.display="flex"}}.bind(void 0),hideToaster=function(){_newArrowCheck(this,this);var e=document.querySelector("#toaster");null!==e&&e.removeAttribute("style")}.bind(void 0),retryRequests=function(){_newArrowCheck(this,this);var n=[];return new Promise(function(t){_newArrowCheck(this,this),requestCache.takeAll().then(function(e){_newArrowCheck(this,this),e.forEach(function(e){_newArrowCheck(this,this);var t=fetch(e.url,{method:e.method,body:e.body?JSON.stringify(e.body):void 0});n.push(t)}.bind(this)),Promise.all(n).then(function(){return _newArrowCheck(this,this),t(!0)}.bind(this)).catch(function(){return _newArrowCheck(this,this),t(!1)}.bind(this))}.bind(this)).catch(function(){return _newArrowCheck(this,this),t(!1)}.bind(this))}.bind(this))}.bind(void 0),LazyLoader=function(){function t(e){if(_classCallCheck(this,t),"IntersectionObserver"in window){this.callback=e,this.observer=new IntersectionObserver(this.onIntersection.bind(this),{root:null,rootMargin:"0px",threshold:.01})}else this.observer=null}return _createClass(t,[{key:"isEnabled",value:function(){return null!==this.observer}},{key:"onIntersection",value:function(e){e.forEach(function(e){_newArrowCheck(this,this),e.isIntersecting&&!1!==this.callback(e.target)&&this.observer.unobserve(e.target)}.bind(this))}},{key:"observeEntry",value:function(e){this.observer.observe(e)}}],[{key:"loadPicture",value:function(e){e.querySelectorAll("source").forEach(function(e){_newArrowCheck(this,this),e.setAttribute("srcset",e.getAttribute("data-srcset"))}.bind(this));var t=e.querySelector("img");return t.setAttribute("src",t.getAttribute("data-src")),!0}}]),t}(),ObjectCache=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,n),this.cachename=e,this.openDb(t)}return _createClass(n,[{key:"openDb",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.cache=idb.open(this.cachename,1,function(e){switch(_newArrowCheck(this,this),e.oldVersion){case 0:e.createObjectStore("cache",{keyPath:"id",autoIncrement:t}).createIndex("by-id","id")}}.bind(this))}},{key:"getAll",value:function(){return this.cache.then(function(e){return _newArrowCheck(this,this),e.transaction("cache").objectStore("cache").index("by-id").getAll()}.bind(this))}},{key:"takeAll",value:function(){var r=[];return new Promise(function(n,t){_newArrowCheck(this,this),this.cache.then(function(e){_newArrowCheck(this,this);var t=e.transaction("cache","readwrite");t.objectStore("cache").index("by-id").iterateCursor(function(e){_newArrowCheck(this,this),e&&(r.push(e.value),e.delete(),e.continue())}.bind(this)),t.complete.then(function(){_newArrowCheck(this,this),n(r)}.bind(this))}.bind(this)).catch(function(e){_newArrowCheck(this,this),t(e)}.bind(this))}.bind(this))}},{key:"get",value:function(t){return this.cache.then(function(e){return _newArrowCheck(this,this),e.transaction("cache").objectStore("cache").get(t)}.bind(this))}},{key:"putAll",value:function(n){this.cache.then(function(e){_newArrowCheck(this,this);var t=e.transaction("cache","readwrite").objectStore("cache");n.forEach(function(e){_newArrowCheck(this,this),t.put(e)}.bind(this))}.bind(this))}},{key:"put",value:function(e){this.putAll([e])}},{key:"delete",value:function(t){this.cache.then(function(e){_newArrowCheck(this,this),e.transaction("cache","readwrite").objectStore("cache").delete(t)}.bind(this))}}]),n}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _newArrowCheck(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var restaurantsCache=new ObjectCache("restaurants"),reviewsCache=new ObjectCache("reviews");"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){if(_newArrowCheck(this,this),"cache_refresh"===e.data.message){var t=e.data.cacheinfo;"restaurant"===t.target?(console.log("updating restaurant",t.id),DBHelper.fetchRestaurantById(t.id,function(){_newArrowCheck(this,this)}.bind(this))):(console.log("updating reviews",t.id),DBHelper.fetchReviews(t.id,function(){_newArrowCheck(this,this)}.bind(this)))}}.bind(void 0));var restaurant,map,DBHelper=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"getRestaurants",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:200;restaurantsCache.getAll().then(function(e){_newArrowCheck(this,this),e.length<10?setTimeout(this.getRestaurants(t,2*n),n):t(null,e)}.bind(this)).catch(function(){_newArrowCheck(this,this),this.fetchRestaurants(t)}.bind(this))}},{key:"fetchRestaurants",value:function(t){restaurantsCache.getAll().then(function(e){_newArrowCheck(this,this),10<=e.length&&(t(null,e),t=function(){_newArrowCheck(this,this)}.bind(this)),fetch(this.DATABASE_URL+"/restaurants").then(function(e){_newArrowCheck(this,this),e.json().then(function(e){_newArrowCheck(this,this),t(null,e),restaurantsCache.putAll(e)}.bind(this)).catch(function(e){return _newArrowCheck(this,this),t(e,null)}.bind(this))}.bind(this)).catch(function(e){return _newArrowCheck(this,this),t(e,null)}.bind(this))}.bind(this))}},{key:"fetchReviews",value:function(n,r){reviewsCache.getAll().then(function(e){if(_newArrowCheck(this,this),1<=e.length){var t=e.filter(function(e){return _newArrowCheck(this,this),e.restaurant_id==n}.bind(this));0<t.length&&(r(null,t),r=function(){_newArrowCheck(this,this)}.bind(this))}fetch(this.DATABASE_URL+"/reviews/?restaurant_id="+n).then(function(e){_newArrowCheck(this,this),e.json().then(function(e){_newArrowCheck(this,this),r(null,e),reviewsCache.putAll(e)}.bind(this)).catch(function(e){return _newArrowCheck(this,this),r(e,null)}.bind(this))}.bind(this)).catch(function(e){return _newArrowCheck(this,this),r(e,null)}.bind(this))}.bind(this))}},{key:"fetchRestaurantById",value:function(t,n){var r=!1;restaurantsCache.get(parseInt(t)).then(function(e){_newArrowCheck(this,this),"object"===_typeof(e)&&(r=!0,n(null,e)),r&&(n=function(){_newArrowCheck(this,this)}.bind(this)),fetch(this.DATABASE_URL+"/restaurants/"+t).then(function(e){_newArrowCheck(this,this),200===e.status?e.json().then(function(e){_newArrowCheck(this,this),n(null,e),restaurantsCache.put(e)}.bind(this)).catch(function(e){return _newArrowCheck(this,this),n(e,null)}.bind(this)):404===e.status?n("Restaurant does not exist",null):n(e.statusText,null)}.bind(this)).catch(function(e){return _newArrowCheck(this,this),n(e,null)}.bind(this))}.bind(this))}},{key:"fetchRestaurantByCuisine",value:function(r,i){n.fetchRestaurants(function(e,t){if(_newArrowCheck(this,this),e)i(e,null);else{var n=t.filter(function(e){return _newArrowCheck(this,this),e.cuisine_type==r}.bind(this));i(null,n)}}.bind(this))}},{key:"fetchRestaurantByNeighborhood",value:function(r,i){n.fetchRestaurants(function(e,t){if(_newArrowCheck(this,this),e)i(e,null);else{var n=t.filter(function(e){return _newArrowCheck(this,this),e.neighborhood==r}.bind(this));i(null,n)}}.bind(this))}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,i,o){n.fetchRestaurants(function(e,t){if(_newArrowCheck(this,this),e)o(e,null);else{var n=t;"all"!=r&&(n=n.filter(function(e){return _newArrowCheck(this,this),e.cuisine_type==r}.bind(this))),"all"!=i&&(n=n.filter(function(e){return _newArrowCheck(this,this),e.neighborhood==i}.bind(this))),o(null,n)}}.bind(this))}},{key:"fetchNeighborhoods",value:function(i){n.getRestaurants(function(e,n){if(_newArrowCheck(this,this),e)i(e,null);else{var r=n.map(function(e,t){return _newArrowCheck(this,this),n[t].neighborhood}.bind(this)),t=r.filter(function(e,t){return _newArrowCheck(this,this),r.indexOf(e)==t}.bind(this));i(null,t)}}.bind(this))}},{key:"fetchCuisines",value:function(i){n.getRestaurants(function(e,n){if(_newArrowCheck(this,this),e)i(e,null);else{var r=n.map(function(e,t){return _newArrowCheck(this,this),n[t].cuisine_type}.bind(this)),t=r.filter(function(e,t){return _newArrowCheck(this,this),r.indexOf(e)==t}.bind(this));i(null,t)}}.bind(this))}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id=".concat(e.id)}},{key:"imageUrlForRestaurant",value:function(e){return"/img/".concat(e.photograph)}},{key:"mapMarkerForRestaurant",value:function(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:n.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"toggleRestaurantFavorite",value:function(e,t){return fetch(n.DATABASE_URL+"/restaurants/".concat(e,"/?is_favorite=").concat(t),{method:"PUT"})}},{key:"addRestaurantReview",value:function(e){return fetch(n.DATABASE_URL+"/reviews/",{method:"POST",body:JSON.stringify(e)})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337"}}]),n}();function _newArrowCheck(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}document.onreadystatechange=function(){_newArrowCheck(this,this),"interactive"===document.readyState&&fetchRestaurantFromURL(function(e){_newArrowCheck(this,this),e?console.error(e):fillBreadcrumb()}.bind(this))}.bind(void 0);var initializeMap=function(){_newArrowCheck(this,this),self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:self.restaurant.latlng,scrollwheel:!1}),self.map.addListener("tilesloaded",setMapTitle),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map)}.bind(void 0);window.initMap=function(){_newArrowCheck(this,this),initializeMap()}.bind(void 0);var loadInteractiveMap=function(e){if(_newArrowCheck(this,this),null===document.querySelector("#mapScript")){var t=document.createElement("script");t.id="mapScript",t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCWYfWK4x2AWzzNW1B6YqeMg9JRmBRBygU&libraries=places&callback=initMap",document.querySelector("head").append(t)}e.preventDefault()}.bind(void 0),setMapTitle=function(){_newArrowCheck(this,this),document.getElementById("map").querySelector("iframe").setAttribute("title","Google maps with restaurant location")}.bind(void 0),setupElementWithLabel=function(e,t,n){_newArrowCheck(this,this);var r=document.createElement("span");r.className="sr-only",r.innerHTML=t,e.append(r);var i=document.createTextNode(n);return e.append(i),e}.bind(void 0),fetchRestaurantFromURL=function(n){if(_newArrowCheck(this,this),self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){_newArrowCheck(this,this),(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}.bind(this)):(error="No restaurant id in URL",n(error,null))}}.bind(void 0),createPictureTag=function(e){_newArrowCheck(this,this);var r=DBHelper.imageUrlForRestaurant(e),i=document.createElement("picture");[{media:"(max-width: 400px)",srcset:["@400.jpg 1x",".jpg 2x"]},{media:"(max-width: 499px)",srcset:["@550.jpg 1x",".jpg 2x"]},{media:"(min-width: 500px)",srcset:["@400.jpg 1x",".jpg 2x"]}].forEach(function(e){_newArrowCheck(this,this);var t=document.createElement("source");t.setAttribute("media",e.media);var n=[];e.srcset.forEach(function(e){_newArrowCheck(this,this),n.push("".concat(r).concat(e))}.bind(this)),t.setAttribute("srcset",n.join(", ")),i.append(t)}.bind(this));var t=document.createElement("img");return t.setAttribute("src","".concat(r,"@550.jpg")),t.setAttribute("alt","Restaurant "+e.name),i.append(t),i}.bind(void 0),fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;_newArrowCheck(this,this);var t=document.getElementById("restaurant-name");t.appendChild(createFavoriteToggle(e));var n=document.createTextNode(e.name);t.appendChild(n);var r=document.getElementById("restaurant-address");setupElementWithLabel(r,"Address:",e.address),document.getElementById("restaurant-img").append(createPictureTag(e));var i=document.getElementById("restaurant-cuisine");setupElementWithLabel(i,"Cuisine:",e.cuisine_type),e.operating_hours&&fillRestaurantHoursHTML(),DBHelper.fetchReviews(self.restaurant.id,function(e,t){_newArrowCheck(this,this),e?console.log("Failed to fetch reviews:",e):fillReviewsHTML(t)}.bind(this));var o=document.querySelector("#map").querySelector("img");null!==o&&(o.src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCWYfWK4x2AWzzNW1B6YqeMg9JRmBRBygU&center=".concat(e.latlng.lat,",").concat(e.latlng.lng,"&zoom=12&scale=1&size=400x300&maptype=roadmap&format=png8&visual_refresh=true&markers=size:mid%7Ccolor:0xff0000%7Clabel:").concat(e.name,"%7C").concat(e.latlng.lat,",").concat(e.latlng.lng),o.alt="Map of ".concat(e.name)),document.querySelector("#mapoverlay").addEventListener("click",loadInteractiveMap)}.bind(void 0),fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours;_newArrowCheck(this,this);var t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),i=document.createElement("td");i.innerHTML=n,r.appendChild(i);var o=document.createElement("td");o.innerHTML=e[n],r.appendChild(o),t.appendChild(r)}}.bind(void 0),fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews;_newArrowCheck(this,this),e.forEach(function(e){for(var t in _newArrowCheck(this,this),e)"string"==typeof e[t]&&-1<e[t].indexOf("<")&&(e[t]=e[t].replace("<","&lt;"))}.bind(this));var t=document.getElementById("reviews-container"),n=document.createElement("a");n.name="reviews";var r=document.createElement("h3");if(r.setAttribute("tabindex","0"),r.innerHTML="Reviews",n.appendChild(r),t.appendChild(n),!e){var i=document.createElement("p");return i.innerHTML="No reviews yet!",void t.appendChild(i)}var o=document.getElementById("reviews-list");e.reverse().forEach(function(e){_newArrowCheck(this,this),o.appendChild(createReviewHTML(e))}.bind(this)),t.appendChild(o),document.getElementById("review-restaurant-id").value=self.restaurant.id,document.getElementById("addreview-btn").addEventListener("click",addReview)}.bind(void 0),createReviewHTML=function(e){_newArrowCheck(this,this);var t=document.createElement("li"),n=document.createElement("div");n.className="review-header";var r=document.createElement("p");r.innerHTML=e.name,r.className="review-name",n.appendChild(r);var i=document.createElement("p"),o=new Date(e.createdAt);i.innerHTML=o.toDateString(),i.class="review-date",n.appendChild(i);var s=document.createElement("p");s.innerHTML="Rating: ".concat(e.rating),s.className="review-rating",n.appendChild(s),t.appendChild(n);var a=document.createElement("div");a.className="review-body";var c=document.createElement("p");return c.innerHTML=e.comments,a.appendChild(c),t.appendChild(a),t}.bind(void 0),fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;_newArrowCheck(this,this);var t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}.bind(void 0),getParameterByName=function(e,t){_newArrowCheck(this,this),t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}.bind(void 0),createFavoriteToggle=function(e){_newArrowCheck(this,this);var t=document.createElement("a");t.href="#",t.className="favorite-toggle",t.setAttribute("data-restaurant-id",e.id),t.setAttribute("role","switch");var n="true"===e.is_favorite?"true":"false";return t.setAttribute("aria-checked",n),t.setAttribute("title","Toggle favorite status of "+e.name),t.setAttribute("aria-label","Toggle favorite status of "+e.name),t.addEventListener("click",toggleFavoriteHandler),t}.bind(void 0),toggleFavoriteHandler=function(e){_newArrowCheck(this,this);var t=e.currentTarget,n=t.getAttribute("data-restaurant-id"),r="false"===t.getAttribute("aria-checked")?"true":"false";DBHelper.toggleRestaurantFavorite(n,r).then(function(){_newArrowCheck(this,this),t.setAttribute("aria-checked",r)}.bind(this)),e.preventDefault()}.bind(void 0),addReview=function(e){_newArrowCheck(this,this),e.preventDefault();var t=document.querySelector("#addreview"),n={},r=t.querySelector(".form-warning");r.style.display="none";for(var i=["restaurant_id","name","rating","comments"],o=0;o<i.length;o++){var s=i[o],a=t.querySelector("[name='".concat(s,"']"));if(""!=a.validationMessage)return r.innerHTML="Error in ".concat(s," field. ").concat(a.validationMessage),void(r.style.display="flex");n[s]=a.value}DBHelper.addRestaurantReview(n).then(function(e){_newArrowCheck(this,this),t.reset(),e.json().then(function(e){_newArrowCheck(this,this);var t=document.getElementById("reviews-list"),n=createReviewHTML(e);t.insertBefore(n,t.childNodes[1])}.bind(this))}.bind(this))}.bind(void 0);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlkYi5qcyIsImFwcC5qcyIsImRiaGVscGVyLmpzIiwicmVzdGF1cmFudF9pbmZvLmpzIl0sIm5hbWVzIjpbInJlcXVlc3RDYWNoZSIsInByb21pc2lmeVJlcXVlc3QiLCJyZXF1ZXN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJvbmVycm9yIiwiZXJyb3IiLCJwcm9taXNpZnlSZXF1ZXN0Q2FsbCIsIm9iaiIsIm1ldGhvZCIsImFyZ3MiLCJwIiwiYXBwbHkiLCJ0aGVuIiwicHJveHlQcm9wZXJ0aWVzIiwiUHJveHlDbGFzcyIsInRhcmdldFByb3AiLCJwcm9wZXJ0aWVzIiwiZm9yRWFjaCIsInByb3AiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsImdldCIsInRoaXMiLCJzZXQiLCJ2YWwiLCJwcm94eVJlcXVlc3RNZXRob2RzIiwiQ29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJwcm94eU1ldGhvZHMiLCJwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzIiwidmFsdWUiLCJDdXJzb3IiLCJJbmRleCIsImluZGV4IiwiX2luZGV4IiwiY3Vyc29yIiwiX2N1cnNvciIsIl9yZXF1ZXN0IiwiT2JqZWN0U3RvcmUiLCJzdG9yZSIsIl9zdG9yZSIsIlRyYW5zYWN0aW9uIiwiaWRiVHJhbnNhY3Rpb24iLCJfdHgiLCJjb21wbGV0ZSIsIm9uY29tcGxldGUiLCJvbmFib3J0IiwiVXBncmFkZURCIiwiZGIiLCJvbGRWZXJzaW9uIiwidHJhbnNhY3Rpb24iLCJfZGIiLCJEQiIsIklEQkluZGV4IiwiSURCQ3Vyc29yIiwibWV0aG9kTmFtZSIsImNyZWF0ZUluZGV4IiwiSURCT2JqZWN0U3RvcmUiLCJvYmplY3RTdG9yZSIsIklEQlRyYW5zYWN0aW9uIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJJREJEYXRhYmFzZSIsImZ1bmNOYW1lIiwicmVwbGFjZSIsImFyciIsIkFycmF5Iiwic2xpY2UiLCJjYWxsIiwiY2FsbGJhY2siLCJsZW5ndGgiLCJuYXRpdmVPYmplY3QiLCJnZXRBbGwiLCJxdWVyeSIsImNvdW50IiwiaW5zdGFuY2UiLCJpdGVtcyIsIml0ZXJhdGVDdXJzb3IiLCJwdXNoIiwidW5kZWZpbmVkIiwiY29udGludWUiLCJleHAiLCJvcGVuIiwibmFtZSIsInZlcnNpb24iLCJ1cGdyYWRlQ2FsbGJhY2siLCJpbmRleGVkREIiLCJvbnVwZ3JhZGVuZWVkZWQiLCJldmVudCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Iiwic2VsZiIsImlkYiIsInJldHJ5SW5Qcm9ncmVzcyIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsInNjb3BlIiwicmVnIiwiX25ld0Fycm93Q2hlY2siLCJjb25zb2xlIiwibG9nIiwiT2JqZWN0Q2FjaGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZGF0YSIsIm1lc3NhZ2UiLCJwdXQiLCJzaG93VG9hc3RlciIsInJ1blJldHJ5UmVxdWVzdHMiLCJyZXRyeUlmT25saW5lIiwiYmluZCIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsInJlcXVlc3RzIiwiY2F0Y2giLCJzZXRUaW1lb3V0Iiwib25MaW5lIiwicmV0cnlSZXF1ZXN0cyIsInN1Y2Nlc3MiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImJ0bnRleHQiLCJ0b2FzdGVyIiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImJ1dHRvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIm9uY2xpY2siLCJzdHlsZSIsImRpc3BsYXkiLCJoaWRlVG9hc3RlciIsInJlbW92ZUF0dHJpYnV0ZSIsInJldHJpZXMiLCJ0YWtlQWxsIiwiciIsImZldGNoIiwidXJsIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbGwiLCJMYXp5TG9hZGVyIiwiX2NsYXNzQ2FsbENoZWNrIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsIm9uSW50ZXJzZWN0aW9uIiwicm9vdCIsInJvb3RNYXJnaW4iLCJ0aHJlc2hvbGQiLCJvYnNlcnZlZEVudHJpZXMiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidGFyZ2V0IiwidW5vYnNlcnZlIiwib2JzZXJ2ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzb3VyY2UiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJpbWciLCJjYWNoZW5hbWUiLCJhdXRvSW5jcmVtZW50Iiwib3BlbkRiIiwiY2FjaGUiLCJ1cGdyYWRlRGIiLCJrZXlQYXRoIiwidHgiLCJpZCIsIm9iamVjdHMiLCJvYmplY3QiLCJwdXRBbGwiLCJyZXN0YXVyYW50c0NhY2hlIiwicmV2aWV3c0NhY2hlIiwiY2FjaGVpbmZvIiwiREJIZWxwZXIiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmV0Y2hSZXZpZXdzIiwicmVzdGF1cmFudCIsIm1hcCIsInRpbWVvdXQiLCJnZXRSZXN0YXVyYW50cyIsImZldGNoUmVzdGF1cmFudHMiLCJEQVRBQkFTRV9VUkwiLCJyZXNwb25zZSIsImpzb24iLCJyZXN0YXVyYW50SWQiLCJyZXZpZXdzIiwiZmlsdGVyIiwiZWwiLCJnb3RGcm9tQ2FjaGUiLCJwYXJzZUludCIsIl90eXBlb2YiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiY3Vpc2luZSIsInJlc3RhdXJhbnRzIiwicmVzdWx0cyIsImN1aXNpbmVfdHlwZSIsIm5laWdoYm9yaG9vZCIsIm5laWdoYm9yaG9vZHMiLCJ2IiwiaSIsInVuaXF1ZU5laWdoYm9yaG9vZHMiLCJpbmRleE9mIiwiY3Vpc2luZXMiLCJ1bmlxdWVDdWlzaW5lcyIsImNvbmNhdCIsInBob3RvZ3JhcGgiLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJsYXRsbmciLCJ0aXRsZSIsInVybEZvclJlc3RhdXJhbnQiLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwiZmF2b3JpdGUiLCJyZXZpZXciLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJmZXRjaFJlc3RhdXJhbnRGcm9tVVJMIiwiZmlsbEJyZWFkY3J1bWIiLCJpbml0aWFsaXplTWFwIiwiTWFwIiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwic2Nyb2xsd2hlZWwiLCJhZGRMaXN0ZW5lciIsInNldE1hcFRpdGxlIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImluaXRNYXAiLCJsb2FkSW50ZXJhY3RpdmVNYXAiLCJhZGRNcyIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJhcHBlbmQiLCJwcmV2ZW50RGVmYXVsdCIsInNldHVwRWxlbWVudFdpdGhMYWJlbCIsImVsZW1lbnQiLCJsYWJlbCIsInRleHQiLCJsYWJlbEUiLCJjbGFzc05hbWUiLCJ0ZXh0RSIsImNyZWF0ZVRleHROb2RlIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiY3JlYXRlUGljdHVyZVRhZyIsImltZ0Jhc2UiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJwaWN0dXJlVGFnIiwibWVkaWEiLCJzcmNzZXQiLCJzb3VyY2VUYWciLCJqb2luIiwiaW1nVGFnIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVGYXZvcml0ZVRvZ2dsZSIsImFkZHJlc3MiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsImZpbGxSZXZpZXdzSFRNTCIsIm1hcEltZyIsImxhdCIsImxuZyIsImFsdCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJrZXkiLCJyb3ciLCJkYXkiLCJ0aW1lIiwiY29udGFpbmVyIiwiYW5jaG9yIiwibm9SZXZpZXdzIiwidWwiLCJyZXZlcnNlIiwiY3JlYXRlUmV2aWV3SFRNTCIsImFkZFJldmlldyIsImxpIiwiaGVhZCIsImRhdGUiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9EYXRlU3RyaW5nIiwiY2xhc3MiLCJyYXRpbmciLCJjb21tZW50cyIsImJyZWFkY3J1bWIiLCJocmVmIiwiUmVnRXhwIiwiZXhlYyIsImRlY29kZVVSSUNvbXBvbmVudCIsImNoZWNrIiwiaXNfZmF2b3JpdGUiLCJ0b2dnbGVGYXZvcml0ZUhhbmRsZXIiLCJjdXJyZW50VGFyZ2V0IiwicklkIiwidG9nZ2xlUmVzdGF1cmFudEZhdm9yaXRlIiwiZm9ybSIsIndhcm4iLCJmaWVsZHMiLCJkb21FbCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkUmVzdGF1cmFudFJldmlldyIsInJlc2V0IiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyJdLCJtYXBwaW5ncyI6IkFBQUEscWZDQUEsSUFBSUEsY0RFSCxXQUtDLFNBQVNDLEVBQWlCQyxHQUN4QixPQUFPLElBQUlDLFFBQVEsU0FBU0MsRUFBU0MsR0FDbkNILEVBQVFJLFVBQVksV0FDbEJGLEVBQVFGLEVBQVFLLFNBR2xCTCxFQUFRTSxRQUFVLFdBQ2hCSCxFQUFPSCxFQUFRTyxVQUtyQixTQUFTQyxFQUFxQkMsRUFBS0MsRUFBUUMsR0FDekMsSUFBSVgsRUFDQVksRUFBSSxJQUFJWCxRQUFRLFNBQVNDLEVBQVNDLEdBRXBDSixFQURBQyxFQUFVUyxFQUFJQyxHQUFRRyxNQUFNSixFQUFLRSxJQUNQRyxLQUFLWixFQUFTQyxLQUkxQyxPQURBUyxFQUFFWixRQUFVQSxFQUNMWSxFQVdULFNBQVNHLEVBQWdCQyxFQUFZQyxFQUFZQyxHQUMvQ0EsRUFBV0MsUUFBUSxTQUFTQyxHQUMxQkMsT0FBT0MsZUFBZU4sRUFBV08sVUFBV0gsR0FDMUNJLElBQUssV0FDSCxPQUFPQyxLQUFLUixHQUFZRyxJQUUxQk0sSUFBSyxTQUFTQyxHQUNaRixLQUFLUixHQUFZRyxHQUFRTyxPQU1qQyxTQUFTQyxFQUFvQlosRUFBWUMsRUFBWVksRUFBYVgsR0FDaEVBLEVBQVdDLFFBQVEsU0FBU0MsR0FDcEJBLEtBQVFTLEVBQVlOLFlBQzFCUCxFQUFXTyxVQUFVSCxHQUFRLFdBQzNCLE9BQU9aLEVBQXFCaUIsS0FBS1IsR0FBYUcsRUFBTVUsZUFLMUQsU0FBU0MsRUFBYWYsRUFBWUMsRUFBWVksRUFBYVgsR0FDekRBLEVBQVdDLFFBQVEsU0FBU0MsR0FDcEJBLEtBQVFTLEVBQVlOLFlBQzFCUCxF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RUFBTzlPLE9BQVF3SSxJQUFLLENBQ3RDLElBQU1iLEVBQUttSCxFQUFPdEcsR0FDWnVHLEVBQVFILEVBQUtwTCxjQUFMLFVBQUFxRixPQUE2QmxCLEVBQTdCLE9BQ2QsR0FBK0IsSUFBM0JvSCxFQUFNQyxrQkFHUixPQUZBSCxFQUFLcEwsVUFBTCxZQUFBb0YsT0FBNkJsQixFQUE3QixZQUFBa0IsT0FBMENrRyxFQUFNQyx3QkFDaERILEVBQUs5SyxNQUFNQyxRQUFVLFFBR3ZCMEYsRUFBTy9CLEdBQU1vSCxFQUFNdFIsTUFFckJvSixTQUFTb0ksb0JBQW9CdkYsR0FBUXBOLEtBQUssU0FBQ2dMLEdBQWF2RixlQUFBOUUsS0FBQUEsTUFDdEQyUixFQUFLTSxRQUNMNUgsRUFBU0MsT0FBT2pMLEtBQUssU0FBQzhGLEdBQVNMLGVBQUE5RSxLQUFBQSxNQUM3QixJQUFNbVEsRUFBS3pLLFNBQVNxSCxlQUFlLGdCQUM3QndELEVBQUtGLGlCQUFpQmxMLEdBQzVCZ0wsRUFBRytCLGFBQWEzQixFQUFJSixFQUFHZ0MsV0FBVyxLQUhwQzFNLEtBQUF6RixRQUZGeUYsS0FBQXpGLFFBakJJeUYsVUFBQSIsImZpbGUiOiJkZXRhaWxzYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIHRvQXJyYXkoYXJyKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcmVxdWVzdDtcbiAgICB2YXIgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdCA9IG9ialttZXRob2RdLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHAucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpO1xuICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBwLnJlcXVlc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlQcm9wZXJ0aWVzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3h5Q2xhc3MucHJvdG90eXBlLCBwcm9wLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgdGhpc1t0YXJnZXRQcm9wXVtwcm9wXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0uYXBwbHkodGhpc1t0YXJnZXRQcm9wXSwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gSW5kZXgoaW5kZXgpIHtcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEluZGV4LCAnX2luZGV4JywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ211bHRpRW50cnknLFxuICAgICd1bmlxdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdnZXQnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgZnVuY3Rpb24gQ3Vyc29yKGN1cnNvciwgcmVxdWVzdCkge1xuICAgIHRoaXMuX2N1cnNvciA9IGN1cnNvcjtcbiAgICB0aGlzLl9yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhDdXJzb3IsICdfY3Vyc29yJywgW1xuICAgICdkaXJlY3Rpb24nLFxuICAgICdrZXknLFxuICAgICdwcmltYXJ5S2V5JyxcbiAgICAndmFsdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoQ3Vyc29yLCAnX2N1cnNvcicsIElEQkN1cnNvciwgW1xuICAgICd1cGRhdGUnLFxuICAgICdkZWxldGUnXG4gIF0pO1xuXG4gIC8vIHByb3h5ICduZXh0JyBtZXRob2RzXG4gIFsnYWR2YW5jZScsICdjb250aW51ZScsICdjb250aW51ZVByaW1hcnlLZXknXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBpZiAoIShtZXRob2ROYW1lIGluIElEQkN1cnNvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgQ3Vyc29yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnNvciA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJzb3IuX2N1cnNvclttZXRob2ROYW1lXS5hcHBseShjdXJzb3IuX2N1cnNvciwgYXJncyk7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KGN1cnNvci5fcmVxdWVzdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgY3Vyc29yLl9yZXF1ZXN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBPYmplY3RTdG9yZShzdG9yZSkge1xuICAgIHRoaXMuX3N0b3JlID0gc3RvcmU7XG4gIH1cblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuY3JlYXRlSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmNyZWF0ZUluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuaW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnaW5kZXhOYW1lcycsXG4gICAgJ2F1dG9JbmNyZW1lbnQnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdwdXQnLFxuICAgICdhZGQnLFxuICAgICdkZWxldGUnLFxuICAgICdjbGVhcicsXG4gICAgJ2dldCcsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdkZWxldGVJbmRleCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oaWRiVHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl90eCA9IGlkYlRyYW5zYWN0aW9uO1xuICAgIHRoaXMuY29tcGxldGUgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLm9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl90eC5vYmplY3RTdG9yZS5hcHBseSh0aGlzLl90eCwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFRyYW5zYWN0aW9uLCAnX3R4JywgW1xuICAgICdvYmplY3RTdG9yZU5hbWVzJyxcbiAgICAnbW9kZSdcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFRyYW5zYWN0aW9uLCAnX3R4JywgSURCVHJhbnNhY3Rpb24sIFtcbiAgICAnYWJvcnQnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFVwZ3JhZGVEQihkYiwgb2xkVmVyc2lvbiwgdHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICAgIHRoaXMub2xkVmVyc2lvbiA9IG9sZFZlcnNpb247XG4gICAgdGhpcy50cmFuc2FjdGlvbiA9IG5ldyBUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gIH1cblxuICBVcGdyYWRlREIucHJvdG90eXBlLmNyZWF0ZU9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl9kYi5jcmVhdGVPYmplY3RTdG9yZS5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFVwZ3JhZGVEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVXBncmFkZURCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnZGVsZXRlT2JqZWN0U3RvcmUnLFxuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gREIoZGIpIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICB9XG5cbiAgREIucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzLl9kYi50cmFuc2FjdGlvbi5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKERCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICAvLyBBZGQgY3Vyc29yIGl0ZXJhdG9yc1xuICAvLyBUT0RPOiByZW1vdmUgdGhpcyBvbmNlIGJyb3dzZXJzIGRvIHRoZSByaWdodCB0aGluZyB3aXRoIHByb21pc2VzXG4gIFsnb3BlbkN1cnNvcicsICdvcGVuS2V5Q3Vyc29yJ10uZm9yRWFjaChmdW5jdGlvbihmdW5jTmFtZSkge1xuICAgIFtPYmplY3RTdG9yZSwgSW5kZXhdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jTmFtZS5yZXBsYWNlKCdvcGVuJywgJ2l0ZXJhdGUnKV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICAgICAgdmFyIG5hdGl2ZU9iamVjdCA9IHRoaXMuX3N0b3JlIHx8IHRoaXMuX2luZGV4O1xuICAgICAgICB2YXIgcmVxdWVzdCA9IG5hdGl2ZU9iamVjdFtmdW5jTmFtZV0uYXBwbHkobmF0aXZlT2JqZWN0LCBhcmdzLnNsaWNlKDAsIC0xKSk7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2FsbGJhY2socmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcG9seWZpbGwgZ2V0QWxsXG4gIFtJbmRleCwgT2JqZWN0U3RvcmVdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCkgcmV0dXJuO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihxdWVyeSwgY291bnQpIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgaW5zdGFuY2UuaXRlcmF0ZUN1cnNvcihxdWVyeSwgZnVuY3Rpb24oY3Vyc29yKSB7XG4gICAgICAgICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGN1cnNvci52YWx1ZSk7XG5cbiAgICAgICAgICBpZiAoY291bnQgIT09IHVuZGVmaW5lZCAmJiBpdGVtcy5sZW5ndGggPT0gY291bnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICB2YXIgZXhwID0ge1xuICAgIG9wZW46IGZ1bmN0aW9uKG5hbWUsIHZlcnNpb24sIHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdvcGVuJywgW25hbWUsIHZlcnNpb25dKTtcbiAgICAgIHZhciByZXF1ZXN0ID0gcC5yZXF1ZXN0O1xuXG4gICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmICh1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICAgICAgICB1cGdyYWRlQ2FsbGJhY2sobmV3IFVwZ3JhZGVEQihyZXF1ZXN0LnJlc3VsdCwgZXZlbnQub2xkVmVyc2lvbiwgcmVxdWVzdC50cmFuc2FjdGlvbikpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKGRiKSB7XG4gICAgICAgIHJldHVybiBuZXcgREIoZGIpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxldGU6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdkZWxldGVEYXRhYmFzZScsIFtuYW1lXSk7XG4gICAgfVxuICB9O1xuXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwO1xuICAgIG1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBtb2R1bGUuZXhwb3J0cztcbiAgfVxuICBlbHNlIHtcbiAgICBzZWxmLmlkYiA9IGV4cDtcbiAgfVxufSgpKTtcbiIsImxldCByZXF1ZXN0Q2FjaGU7XG5sZXQgcmV0cnlJblByb2dyZXNzID0gMDtcblxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3N3LmpzJywgeyBzY29wZTogJy8nIH0pXG4gICAgLnRoZW4oKHJlZykgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1NXIFJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsLiBTY29wZSBpcyAnICsgcmVnLnNjb3BlKTtcbiAgICAgIHJlcXVlc3RDYWNoZSA9IG5ldyBPYmplY3RDYWNoZSgnZmFpbGVkUmVxdWVzdHMnLCB0cnVlKTtcbiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEubWVzc2FnZSA9PT0gJ3JlcXVlc3RfZmFpbGVkJykge1xuICAgICAgICAgIHJlcXVlc3RDYWNoZS5wdXQoZXZlbnQuZGF0YS5yZXF1ZXN0KTtcbiAgICAgICAgICBzaG93VG9hc3RlcignU29tZSBvZiB5b3VyIGNoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkJyxcbiAgICAgICAgICAnUmV0cnknLCBydW5SZXRyeVJlcXVlc3RzKTtcbiAgICAgICAgICByZXRyeUlmT25saW5lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICByZXF1ZXN0Q2FjaGUuZ2V0QWxsKCkudGhlbigocmVxdWVzdHMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgc2hvd1RvYXN0ZXIoJ1RoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMnLFxuICAgICAgICAgICAgICAnU2F2ZScsIHJ1blJldHJ5UmVxdWVzdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTVyBSZWdpc3RyYXRpb24gZmFpbGVkIHdpdGggJyArIGVycm9yKTtcbiAgICB9KTtcbn1cblxuLy8gZG9jdW1lbnQub25vbmxpbmUgZG9lc24ndCBzZWVtIHRvIGJlIHJlbGlhYmxlLFxuLy8gbmF2aWdhdG9yLm9uTGluZSBsb29rcyBsaWtlIGEgYmV0dGVyIHNvdXJjZVxuY29uc3QgcmV0cnlJZk9ubGluZSA9ICgpID0+IHtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKG5hdmlnYXRvci5vbkxpbmUpIHtcbiAgICAgIHJ1blJldHJ5UmVxdWVzdHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0cnlJZk9ubGluZSgpO1xuICAgIH1cbiAgfSwgMjAwMCk7XG59O1xuXG5jb25zdCBydW5SZXRyeVJlcXVlc3RzID0gKCkgPT4ge1xuICByZXRyeUluUHJvZ3Jlc3MrKztcbiAgaWYgKHJldHJ5SW5Qcm9ncmVzcyAhPT0gMSkgcmV0dXJuO1xuICBzaG93VG9hc3RlcignUmV0cnlpbmcgcmVxdWVzdHMsIHBsZWFzZSB3YWl0Li4uJywgbnVsbCwgbnVsbCk7XG4gIHJldHJ5UmVxdWVzdHMoKS50aGVuKChzdWNjZXNzKSA9PiB7XG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIHNob3dUb2FzdGVyKCdZb3VyIGNoYW5nZXMgd2VyZSBzdWNjZXNzZnVsbHkgc3RvcmVkLiAnICtcbiAgICAgICdSZWxvYWQgdGhlIHBhZ2UgdG8gc2VlIHRoZSBsYXRlc3QgY2hhbmdlcycsICdSZWxvYWQnLCAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93VG9hc3RlcignU29tZSBvZiB5b3VyIGNoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkJyxcbiAgICAgICdSZXRyeScsIHJ1blJldHJ5UmVxdWVzdHMpO1xuICAgICAgcmV0cnlJZk9ubGluZSgpO1xuICAgIH1cbiAgICByZXRyeUluUHJvZ3Jlc3MgPSAwO1xuICB9KTtcbn07XG5cbmNvbnN0IHNob3dUb2FzdGVyID0gKG1lc3NhZ2UsIGJ0bnRleHQsIGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHRvYXN0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9hc3RlcicpO1xuICBpZiAobnVsbCAhPT0gdG9hc3Rlcikge1xuICAgIHRvYXN0ZXIucXVlcnlTZWxlY3RvcignI3RvYXN0ZXItbWVzc2FnZScpXG4gICAgICAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICBjb25zdCBidXR0b24gPSB0b2FzdGVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2FzdGVyLWJ1dHRvbicpLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcbiAgICBpZiAoYnRudGV4dCAhPT0gbnVsbCkge1xuICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGJ0bnRleHQ7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnd2FpdGluZycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b24uaW5uZXJIVE1MID0gJ09rJztcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd3YWl0aW5nJyk7XG4gICAgfVxuICAgIGJ1dHRvbi5vbmNsaWNrID0gY2FsbGJhY2s7XG4gICAgdG9hc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICB9XG59O1xuXG5jb25zdCBoaWRlVG9hc3RlciA9ICgpID0+IHtcbiAgY29uc3QgdG9hc3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2FzdGVyJyk7XG4gIGlmIChudWxsICE9PSB0b2FzdGVyKSB7XG4gICAgdG9hc3Rlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gIH1cbn07XG5cbmNvbnN0IHJldHJ5UmVxdWVzdHMgPSAoKSA9PiB7XG4gIGNvbnN0IHJldHJpZXMgPSBbXTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgcmVxdWVzdENhY2hlLnRha2VBbGwoKS50aGVuKChyZXF1ZXN0cykgPT4ge1xuICAgICAgcmVxdWVzdHMuZm9yRWFjaCgocmVxdWVzdCkgPT4ge1xuICAgICAgICBjb25zdCByID0gZmV0Y2gocmVxdWVzdC51cmwsIHtcbiAgICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuICAgICAgICAgIGJvZHk6IHJlcXVlc3QuYm9keSA/IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QuYm9keSkgOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHJpZXMucHVzaChyKTtcbiAgICAgIH0pO1xuICAgICAgUHJvbWlzZS5hbGwocmV0cmllcylcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKiBcbiAqIExhenlMb2FkZXIgLSBsYXp5IGxvYWQgZW50cmllcyB1c2luZyBjYWxsYmFja1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjazogZnVuY3Rpb24gdG8gaGFuZGxlIGxvYWRpbmcgb24gaW50ZXJzZWN0XG4gKiAgRWxlbWVudCBpcyB1bm9ic2VydmVkIHVubGVzcyB0aGUgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuKi9cbmNsYXNzIExhenlMb2FkZXIge1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xuICAgIGlmICgoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpKSB7XG4gICAgICBjb25zdCBpb0NvbmZpZyA9IHtcbiAgICAgICAgcm9vdDogbnVsbCxcbiAgICAgICAgcm9vdE1hcmdpbjogJzBweCcsXG4gICAgICAgIHRocmVzaG9sZDogMC4wMVxuICAgICAgfTtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgIHRoaXMub25JbnRlcnNlY3Rpb24uYmluZCh0aGlzKSxcbiAgICAgICAgaW9Db25maWdcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGlzRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5vYnNlcnZlciAhPT0gbnVsbDtcbiAgfVxuXG4gIG9uSW50ZXJzZWN0aW9uKG9ic2VydmVkRW50cmllcykge1xuICAgIG9ic2VydmVkRW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrKGVudHJ5LnRhcmdldCkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIG9ic2VydmVFbnRyeShlbnRyeSkge1xuICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShlbnRyeSk7XG4gIH1cblxuICBzdGF0aWMgbG9hZFBpY3R1cmUoZW50cnkpIHtcbiAgICBlbnRyeS5xdWVyeVNlbGVjdG9yQWxsKCdzb3VyY2UnKS5mb3JFYWNoKChzb3VyY2UpID0+IHtcbiAgICAgIHNvdXJjZS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIHNvdXJjZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3Jjc2V0JykpO1xuICAgIH0pO1xuICAgIGNvbnN0IGltZyA9IGVudHJ5LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGltZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJykpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xufVxuXG4vKiogSURCIGNhY2hlXG4gKiBXcmFwcGVyIG9iamVjdCB0byBzdG9yZSBhbmQgcmV0cmlldmUgb2JqZWN0cyBiYXNlZCBvbiBpZCBmcm9tIEluZGV4ZWREQlxuKi9cbmNsYXNzIE9iamVjdENhY2hlIHtcbiAgY29uc3RydWN0b3IoY2FjaGVuYW1lLCBhdXRvSW5jcmVtZW50ID0gZmFsc2UpIHtcbiAgICB0aGlzLmNhY2hlbmFtZSA9IGNhY2hlbmFtZTtcbiAgICB0aGlzLm9wZW5EYihhdXRvSW5jcmVtZW50KTtcbiAgfVxuXG4gIG9wZW5EYihhdXRvSW5jcmVtZW50ID0gZmFsc2UpIHtcbiAgICB0aGlzLmNhY2hlID0gaWRiLm9wZW4odGhpcy5jYWNoZW5hbWUsIDEsICh1cGdyYWRlRGIpID0+IHtcbiAgICAgIHN3aXRjaCAodXBncmFkZURiLm9sZFZlcnNpb24pIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNvbnN0IHN0b3JlID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKCdjYWNoZScsIHtcbiAgICAgICAgICAgIGtleVBhdGg6ICdpZCcsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiBhdXRvSW5jcmVtZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RvcmUuY3JlYXRlSW5kZXgoJ2J5LWlkJywgJ2lkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRBbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUudGhlbigoZGIpID0+IHtcbiAgICAgIHJldHVybiBkYi50cmFuc2FjdGlvbignY2FjaGUnKVxuICAgICAgICAub2JqZWN0U3RvcmUoJ2NhY2hlJykuaW5kZXgoJ2J5LWlkJylcbiAgICAgICAgLmdldEFsbCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIGdldCBhbGwgZWxlbWVudHMgYW5kIGRlbGV0ZSB0aGVtIGZyb20gdGhlIGRiXG4gICAqL1xuICB0YWtlQWxsKCkge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2FjaGUudGhlbigoZGIpID0+IHtcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbignY2FjaGUnLCAncmVhZHdyaXRlJyk7XG4gICAgICAgIHR4Lm9iamVjdFN0b3JlKCdjYWNoZScpLmluZGV4KCdieS1pZCcpLml0ZXJhdGVDdXJzb3IoKGN1cnNvcikgPT4ge1xuICAgICAgICAgIGlmICghY3Vyc29yKSByZXR1cm47XG4gICAgICAgICAgaXRlbXMucHVzaChjdXJzb3IudmFsdWUpO1xuICAgICAgICAgIGN1cnNvci5kZWxldGUoKTtcbiAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHR4LmNvbXBsZXRlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldChpZCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLnRoZW4oKGRiKSA9PiB7XG4gICAgICByZXR1cm4gZGIudHJhbnNhY3Rpb24oJ2NhY2hlJylcbiAgICAgICAgLm9iamVjdFN0b3JlKCdjYWNoZScpLmdldChpZCk7XG4gICAgfSk7XG4gIH1cblxuICBwdXRBbGwob2JqZWN0cykge1xuICAgIHRoaXMuY2FjaGUudGhlbigoZGIpID0+IHtcbiAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oJ2NhY2hlJywgJ3JlYWR3cml0ZScpO1xuICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnY2FjaGUnKTtcbiAgICAgIG9iamVjdHMuZm9yRWFjaCgob2JqZWN0KSA9PiB7XG4gICAgICAgIHN0b3JlLnB1dChvYmplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwdXQob2JqZWN0KSB7XG4gICAgdGhpcy5wdXRBbGwoW29iamVjdF0pO1xuICB9XG5cbiAgZGVsZXRlKGlkKSB7XG4gICAgdGhpcy5jYWNoZS50aGVuKChkYikgPT4ge1xuICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbignY2FjaGUnLCAncmVhZHdyaXRlJyk7XG4gICAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdjYWNoZScpO1xuICAgICAgc3RvcmUuZGVsZXRlKGlkKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb21tb24gZGF0YWJhc2UgaGVscGVyIGZ1bmN0aW9ucy5cbiAqL1xuY29uc3QgcmVzdGF1cmFudHNDYWNoZSA9IG5ldyBPYmplY3RDYWNoZSgncmVzdGF1cmFudHMnKTtcbmNvbnN0IHJldmlld3NDYWNoZSA9IG5ldyBPYmplY3RDYWNoZSgncmV2aWV3cycpO1xuXG5pZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmRhdGEubWVzc2FnZSA9PT0gJ2NhY2hlX3JlZnJlc2gnKSB7XG4gICAgICAvLyB0cnkgdG8gdXBkYXRlIGNhY2hlXG4gICAgICBjb25zdCBjYWNoZWluZm8gPSBldmVudC5kYXRhLmNhY2hlaW5mbztcbiAgICAgIGlmIChjYWNoZWluZm8udGFyZ2V0ID09PSAncmVzdGF1cmFudCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0aW5nIHJlc3RhdXJhbnQnLCBjYWNoZWluZm8uaWQpO1xuICAgICAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGNhY2hlaW5mby5pZCwgKCkgPT4ge30pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0aW5nIHJldmlld3MnLCBjYWNoZWluZm8uaWQpO1xuICAgICAgICBEQkhlbHBlci5mZXRjaFJldmlld3MoY2FjaGVpbmZvLmlkLCAoKSA9PiB7fSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbmNsYXNzIERCSGVscGVyIHtcbiAgLyoqXG4gICAqIERhdGFiYXNlIFVSTC5cbiAgICogQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XG4gICAgcmV0dXJuICdodHRwOi8vbG9jYWxob3N0OjEzMzcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcmVzdGF1cmFudHMgZnJvbSBjYWNoZSB3aXRob3V0IGZldGNoIGFuZCBjYWNoZSB1cGRhdGVcbiAgICogV2FpdCB1bnRpbCBjYWNoZSBpcyBwb3B1bGF0ZWRcbiAgICovXG4gIHN0YXRpYyBnZXRSZXN0YXVyYW50cyhjYWxsYmFjaywgdGltZW91dCA9IDIwMCkge1xuICAgIHJlc3RhdXJhbnRzQ2FjaGUuZ2V0QWxsKCkudGhlbigob2JqZWN0cykgPT4ge1xuICAgICAgaWYgKG9iamVjdHMubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLmdldFJlc3RhdXJhbnRzKGNhbGxiYWNrLCB0aW1lb3V0ICogMiksIHRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgb2JqZWN0cyk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgdGhpcy5mZXRjaFJlc3RhdXJhbnRzKGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgcmVzdGF1cmFudHMgYW5kIHVwZGF0ZSBjYWNoZVxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudHMoY2FsbGJhY2spIHtcbiAgICByZXN0YXVyYW50c0NhY2hlLmdldEFsbCgpLnRoZW4oKG9iamVjdHMpID0+IHtcbiAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA+PSAxMCkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCBvYmplY3RzKTtcbiAgICAgICAgY2FsbGJhY2sgPSAoKSA9PiB7fTsgLy8gZG9uJ3QgY2FsbCBjYWxsYmFjayBhZ2FpbiBmcm9tIGZldGNoXG4gICAgICB9XG4gICAgICBmZXRjaCh0aGlzLkRBVEFCQVNFX1VSTCArICcvcmVzdGF1cmFudHMnKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbigoanNvbikgPT4ge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGpzb24pO1xuICAgICAgICAgIHJlc3RhdXJhbnRzQ2FjaGUucHV0QWxsKGpzb24pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjYWxsYmFjayhlcnJvciwgbnVsbCkpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNhbGxiYWNrKGVycm9yLCBudWxsKSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIHJldmlld3MgYW5kIHVwZGF0ZSBjYWNoZVxuICAgKi9cbiAgc3RhdGljIGZldGNoUmV2aWV3cyhyZXN0YXVyYW50SWQsIGNhbGxiYWNrKSB7XG4gICAgcmV2aWV3c0NhY2hlLmdldEFsbCgpLnRoZW4oKG9iamVjdHMpID0+IHtcbiAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGNvbnN0IHJldmlld3MgPSBvYmplY3RzLmZpbHRlcihcbiAgICAgICAgICAoZWwpID0+IGVsWydyZXN0YXVyYW50X2lkJ10gPT0gcmVzdGF1cmFudElkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXZpZXdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXZpZXdzKTtcbiAgICAgICAgICBjYWxsYmFjayA9ICgpID0+IHt9OyAvLyBkb24ndCByZXBlYXQgY2FsbGJhY2sgb24gZmV0Y2hcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZmV0Y2godGhpcy5EQVRBQkFTRV9VUkwgKyAnL3Jldmlld3MvP3Jlc3RhdXJhbnRfaWQ9JyArIHJlc3RhdXJhbnRJZClcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbigoanNvbikgPT4ge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGpzb24pO1xuICAgICAgICAgIHJldmlld3NDYWNoZS5wdXRBbGwoanNvbik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNhbGxiYWNrKGVycm9yLCBudWxsKSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY2FsbGJhY2soZXJyb3IsIG51bGwpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhIHJlc3RhdXJhbnQgYnkgaXRzIElELlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIGNhbGxiYWNrKSB7XG4gICAgbGV0IGdvdEZyb21DYWNoZSA9IGZhbHNlO1xuICAgIHJlc3RhdXJhbnRzQ2FjaGUuZ2V0KHBhcnNlSW50KGlkKSkudGhlbigob2JqZWN0KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZ290RnJvbUNhY2hlID0gdHJ1ZTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgb2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIGlmIChnb3RGcm9tQ2FjaGUpIHtcbiAgICAgICAgY2FsbGJhY2sgPSAoKSA9PiB7fTtcbiAgICAgIH1cbiAgICAgIGZldGNoKHRoaXMuREFUQUJBU0VfVVJMICsgJy9yZXN0YXVyYW50cy8nICsgaWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKChqc29uKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBqc29uKTtcbiAgICAgICAgICAgIHJlc3RhdXJhbnRzQ2FjaGUucHV0KGpzb24pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY2FsbGJhY2soZXJyb3IsIG51bGwpKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgIGNhbGxiYWNrKCdSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0JywgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2socmVzcG9uc2Uuc3RhdHVzVGV4dCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjYWxsYmFjayhlcnJvciwgbnVsbCkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZShjdWlzaW5lLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50cyAgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIGN1aXNpbmUgdHlwZVxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKChyKSA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gbmVpZ2hib3Job29kXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIoXG4gICAgICAgICAgKHIpID0+IHIubmVpZ2hib3Job29kID09IG5laWdoYm9yaG9vZFxuICAgICAgICApO1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgYW5kIGEgbmVpZ2hib3Job29kXG4gICAqIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLFxuICAgIG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcmVzdWx0cyA9IHJlc3RhdXJhbnRzO1xuICAgICAgICBpZiAoY3Vpc2luZSAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxuICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5laWdoYm9yaG9vZCAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgbmVpZ2hib3Job29kXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoTmVpZ2hib3Job29kcyhjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmdldFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBHZXQgYWxsIG5laWdoYm9yaG9vZHMgZnJvbSBhbGwgcmVzdGF1cmFudHNcbiAgICAgICAgY29uc3QgbmVpZ2hib3Job29kcyA9IHJlc3RhdXJhbnRzLm1hcChcbiAgICAgICAgICAodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0ubmVpZ2hib3Job29kXG4gICAgICAgICk7XG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoXG4gICAgICAgICAgKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PSBpXG4gICAgICAgICk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZU5laWdoYm9yaG9vZHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBjdWlzaW5lcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZ2V0UmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcbiAgICAgICAgY29uc3QgY3Vpc2luZXMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLmN1aXNpbmVfdHlwZSk7XG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gY3Vpc2luZXNcbiAgICAgICAgY29uc3QgdW5pcXVlQ3Vpc2luZXMgPSBjdWlzaW5lcy5maWx0ZXIoXG4gICAgICAgICAgKHYsIGkpID0+IGN1aXNpbmVzLmluZGV4T2YodikgPT0gaVxuICAgICAgICApO1xuICAgICAgICBjYWxsYmFjayhudWxsLCB1bmlxdWVDdWlzaW5lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdGF1cmFudCBwYWdlIFVSTC5cbiAgICovXG4gIHN0YXRpYyB1cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcbiAgICByZXR1cm4gKGAuL3Jlc3RhdXJhbnQuaHRtbD9pZD0ke3Jlc3RhdXJhbnQuaWR9YCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdGF1cmFudCBpbWFnZSBVUkwuXG4gICAqL1xuICBzdGF0aWMgaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcbiAgICByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofWApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBtYXJrZXIgZm9yIGEgcmVzdGF1cmFudC5cbiAgICovXG4gIHN0YXRpYyBtYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIG1hcCkge1xuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgcG9zaXRpb246IHJlc3RhdXJhbnQubGF0bG5nLFxuICAgICAgdGl0bGU6IHJlc3RhdXJhbnQubmFtZSxcbiAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcbiAgICAgIG1hcDogbWFwLFxuICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCB9XG4gICAgKTtcbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBmYXZvcml0ZVxuICAgKi9cbiAgc3RhdGljIHRvZ2dsZVJlc3RhdXJhbnRGYXZvcml0ZShpZCwgZmF2b3JpdGUpIHtcbiAgICByZXR1cm4gZmV0Y2goREJIZWxwZXIuREFUQUJBU0VfVVJMICtcbiAgICAgIGAvcmVzdGF1cmFudHMvJHtpZH0vP2lzX2Zhdm9yaXRlPSR7ZmF2b3JpdGV9YCxcbiAgICAgIHsgbWV0aG9kOiAnUFVUJyB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHJlc3RhdXJhbnQgcmV2aWV3XG4gICAqL1xuICBzdGF0aWMgYWRkUmVzdGF1cmFudFJldmlldyhyZXZpZXcpIHtcbiAgICByZXR1cm4gZmV0Y2goREJIZWxwZXIuREFUQUJBU0VfVVJMICsgJy9yZXZpZXdzLycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmV2aWV3KVxuICAgIH0pO1xuICB9XG59XG4iLCJsZXQgcmVzdGF1cmFudDtcbnZhciBtYXA7XG5cbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHtcbiAgICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvcikgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCBpbml0aWFsaXplTWFwID0gKCkgPT4ge1xuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgem9vbTogMTYsXG4gICAgY2VudGVyOiBzZWxmLnJlc3RhdXJhbnQubGF0bG5nLFxuICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxuICB9KTtcbiAgc2VsZi5tYXAuYWRkTGlzdGVuZXIoJ3RpbGVzbG9hZGVkJywgc2V0TWFwVGl0bGUpO1xuICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xufTtcblxuLyoqXG4gKiBBZGQgR29vZ2xlIG1hcCBpbml0IGNhbGxiYWNrXG4gKi9cbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBpbml0aWFsaXplTWFwKCk7XG59O1xuXG4vKipcbiAqIExvYWQgaW50ZXJhY3RpdmUgbWFwIG9uIHVzZXIgcmVxdWVzdFxuICovXG5jb25zdCBsb2FkSW50ZXJhY3RpdmVNYXAgPSAoZXZlbnQpID0+IHtcbiAgY29uc3QgbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFwU2NyaXB0Jyk7XG4gIGlmIChudWxsID09PSBtcykge1xuICAgIGNvbnN0IGFkZE1zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgYWRkTXMuaWQgPSAnbWFwU2NyaXB0JztcbiAgICBhZGRNcy5zcmMgPSAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1BSXphU3lDV1lmV0s0eDJBV3p6TlcxQjZZcWVNZzlKUm1CUkJ5Z1UmbGlicmFyaWVzPXBsYWNlcyZjYWxsYmFjaz1pbml0TWFwJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkJykuYXBwZW5kKGFkZE1zKTtcbiAgfVxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufTtcblxuLyoqXG4gKiBTZXQgdGl0bGUgb2YgbWFwIGlmcmFtZVxuICovXG5jb25zdCBzZXRNYXBUaXRsZSA9ICgpID0+IHtcbiAgY29uc3QgbWFwRnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykucXVlcnlTZWxlY3RvcignaWZyYW1lJyk7XG4gIG1hcEZyYW1lLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnR29vZ2xlIG1hcHMgd2l0aCByZXN0YXVyYW50IGxvY2F0aW9uJyk7XG59O1xuXG4vKipcbiAqIFNldCBpbm5lciBodG1sIGFuZCBzY3JlZW4gcmVhZGVyIGxhYmVsIG9mIGFuIGVsZW1lbnRcbiAqL1xuY29uc3Qgc2V0dXBFbGVtZW50V2l0aExhYmVsID0gKGVsZW1lbnQsIGxhYmVsLCB0ZXh0KSA9PiB7XG4gIGNvbnN0IGxhYmVsRSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgbGFiZWxFLmNsYXNzTmFtZSA9ICdzci1vbmx5JztcbiAgbGFiZWxFLmlubmVySFRNTCA9IGxhYmVsO1xuICBlbGVtZW50LmFwcGVuZChsYWJlbEUpO1xuICBjb25zdCB0ZXh0RSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuICBlbGVtZW50LmFwcGVuZCh0ZXh0RSk7XG4gIHJldHVybiBlbGVtZW50O1xufTtcblxuLyoqXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXG4gKi9cbmNvbnN0IGZldGNoUmVzdGF1cmFudEZyb21VUkwgPSAoY2FsbGJhY2spID0+IHtcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkgeyAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICBjYWxsYmFjayhudWxsLCBzZWxmLnJlc3RhdXJhbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcbiAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcbiAgICBlcnJvciA9ICdObyByZXN0YXVyYW50IGlkIGluIFVSTCc7XG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcbiAgICAgIGlmICghcmVzdGF1cmFudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgcGljdHVyZSB0YWcgZm9yIHJlc3BvbnNpdmUgYW5kIG9wdGltaXplZCBpbWFnZXNcbiAqL1xuY29uc3QgY3JlYXRlUGljdHVyZVRhZyA9IChyZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGltZ0Jhc2UgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG4gIGNvbnN0IHBpY3R1cmVUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwaWN0dXJlJyk7XG4gIGNvbnN0IHJlc3BvbnNpdmVTZXQgPSBbXG4gICAge1xuICAgICAgbWVkaWE6ICcobWF4LXdpZHRoOiA0MDBweCknLFxuICAgICAgc3Jjc2V0OiBbJ0A0MDAuanBnIDF4JywgJy5qcGcgMngnXVxuICAgIH0sXG4gICAge1xuICAgICAgbWVkaWE6ICcobWF4LXdpZHRoOiA0OTlweCknLFxuICAgICAgc3Jjc2V0OiBbJ0A1NTAuanBnIDF4JywgJy5qcGcgMngnXVxuICAgIH0sXG4gICAge1xuICAgICAgbWVkaWE6ICcobWluLXdpZHRoOiA1MDBweCknLFxuICAgICAgc3Jjc2V0OiBbJ0A0MDAuanBnIDF4JywgJy5qcGcgMngnXVxuICAgIH1cbiAgXTtcbiAgcmVzcG9uc2l2ZVNldC5mb3JFYWNoKChzZXQpID0+IHtcbiAgICBjb25zdCBzb3VyY2VUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcbiAgICBzb3VyY2VUYWcuc2V0QXR0cmlidXRlKCdtZWRpYScsIHNldC5tZWRpYSk7XG4gICAgY29uc3Qgc3Jjc2V0ID0gW107XG4gICAgc2V0LnNyY3NldC5mb3JFYWNoKChpbWcpID0+IHtcbiAgICAgIHNyY3NldC5wdXNoKGAke2ltZ0Jhc2V9JHtpbWd9YCk7XG4gICAgfSk7XG4gICAgc291cmNlVGFnLnNldEF0dHJpYnV0ZSgnc3Jjc2V0Jywgc3Jjc2V0LmpvaW4oJywgJykpO1xuICAgIHBpY3R1cmVUYWcuYXBwZW5kKHNvdXJjZVRhZyk7XG4gIH0pO1xuICBjb25zdCBpbWdUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgaW1nVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYCR7aW1nQmFzZX1ANTUwLmpwZ2ApO1xuICBpbWdUYWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnUmVzdGF1cmFudCAnICsgcmVzdGF1cmFudC5uYW1lKTtcbiAgcGljdHVyZVRhZy5hcHBlbmQoaW1nVGFnKTtcbiAgcmV0dXJuIHBpY3R1cmVUYWc7XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5jb25zdCBmaWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgdGl0bGUuYXBwZW5kQ2hpbGQoY3JlYXRlRmF2b3JpdGVUb2dnbGUocmVzdGF1cmFudCkpO1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocmVzdGF1cmFudC5uYW1lKTtcbiAgdGl0bGUuYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgc2V0dXBFbGVtZW50V2l0aExhYmVsKGFkZHJlc3MsICdBZGRyZXNzOicsIHJlc3RhdXJhbnQuYWRkcmVzcyk7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcbiAgaW1hZ2UuYXBwZW5kKGNyZWF0ZVBpY3R1cmVUYWcocmVzdGF1cmFudCkpO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIHNldHVwRWxlbWVudFdpdGhMYWJlbChjdWlzaW5lLCAnQ3Vpc2luZTonLCByZXN0YXVyYW50LmN1aXNpbmVfdHlwZSk7XG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgREJIZWxwZXIuZmV0Y2hSZXZpZXdzKHNlbGYucmVzdGF1cmFudC5pZCwgKGVycm9yLCByZXZpZXdzKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGZldGNoIHJldmlld3M6JywgZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaWxsUmV2aWV3c0hUTUwocmV2aWV3cyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBzZXQgc3RhdGljIG1hcFxuICBjb25zdCBtYXBJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFwJykucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gIGlmIChudWxsICE9PSBtYXBJbWcpIHtcbiAgICBtYXBJbWcuc3JjID0gYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9zdGF0aWNtYXA/a2V5PUFJemFTeUNXWWZXSzR4MkFXenpOVzFCNllxZU1nOUpSbUJSQnlnVSZjZW50ZXI9JHtyZXN0YXVyYW50LmxhdGxuZy5sYXR9LCR7cmVzdGF1cmFudC5sYXRsbmcubG5nfSZ6b29tPTEyJnNjYWxlPTEmc2l6ZT00MDB4MzAwJm1hcHR5cGU9cm9hZG1hcCZmb3JtYXQ9cG5nOCZ2aXN1YWxfcmVmcmVzaD10cnVlJm1hcmtlcnM9c2l6ZTptaWQlN0Njb2xvcjoweGZmMDAwMCU3Q2xhYmVsOiR7cmVzdGF1cmFudC5uYW1lfSU3QyR7cmVzdGF1cmFudC5sYXRsbmcubGF0fSwke3Jlc3RhdXJhbnQubGF0bG5nLmxuZ31gO1xuICAgIG1hcEltZy5hbHQgPSBgTWFwIG9mICR7cmVzdGF1cmFudC5uYW1lfWA7XG4gIH1cblxuICAvLyBsb2FkIGludGVyYWN0aXZlIG1hcCBvbiByZXF1ZXN0XG4gIGNvbnN0IGludE1hcEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYXBvdmVybGF5Jyk7XG4gIGludE1hcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvYWRJbnRlcmFjdGl2ZU1hcCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpID0+IHtcbiAgcmV2aWV3cy5mb3JFYWNoKChyZXZpZXcpID0+IHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByZXZpZXcpIHtcbiAgICAgIGlmICh0eXBlb2YgcmV2aWV3W2tleV0gPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgcmV2aWV3W2tleV0uaW5kZXhPZignPCcpID4gLTEpIHtcbiAgICAgICAgcmV2aWV3W2tleV0gPSByZXZpZXdba2V5XS5yZXBsYWNlKCc8JywgJyZsdDsnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICBhbmNob3IubmFtZT0ncmV2aWV3cyc7XG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgdGl0bGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcbiAgYW5jaG9yLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGFuY2hvcik7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gIHJldmlld3MucmV2ZXJzZSgpLmZvckVhY2goKHJldmlldykgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xuICBjb25zdCBySWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3LXJlc3RhdXJhbnQtaWQnKTtcbiAgcklkLnZhbHVlID0gc2VsZi5yZXN0YXVyYW50LmlkO1xuICBjb25zdCBhZGROZXdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkcmV2aWV3LWJ0bicpO1xuICBhZGROZXdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRSZXZpZXcpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgY3JlYXRlUmV2aWV3SFRNTCA9IChyZXZpZXcpID0+IHtcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gIGNvbnN0IGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaGVhZC5jbGFzc05hbWUgPSAncmV2aWV3LWhlYWRlcic7XG5cbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbmFtZS5jbGFzc05hbWUgPSAncmV2aWV3LW5hbWUnO1xuICBoZWFkLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbnN0IGNyZWF0ZWRBdCA9IG5ldyBEYXRlKHJldmlldy5jcmVhdGVkQXQpO1xuICBkYXRlLmlubmVySFRNTCA9IGNyZWF0ZWRBdC50b0RhdGVTdHJpbmcoKTtcbiAgZGF0ZS5jbGFzcyA9ICdyZXZpZXctZGF0ZSc7XG4gIGhlYWQuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XG4gIHJhdGluZy5jbGFzc05hbWUgPSAncmV2aWV3LXJhdGluZyc7XG4gIGhlYWQuYXBwZW5kQ2hpbGQocmF0aW5nKTtcblxuICBsaS5hcHBlbmRDaGlsZChoZWFkKTtcblxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGJvZHkuY2xhc3NOYW1lID0gJ3Jldmlldy1ib2R5JztcblxuICBjb25zdCBjb21tZW50cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICBib2R5LmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcblxuICBsaS5hcHBlbmRDaGlsZChib2R5KTtcblxuICByZXR1cm4gbGk7XG59O1xuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmNvbnN0IGZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59O1xuXG4vKipcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXG4gKi9cbmNvbnN0IGdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcbiAgaWYgKCF1cmwpIHtcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgfVxuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnXFxcXCQmJyk7XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApO1xuICBjb25zdCByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoIXJlc3VsdHNbMl0pIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn07XG5cbmNvbnN0IGNyZWF0ZUZhdm9yaXRlVG9nZ2xlID0gKHJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICBidXR0b24uaHJlZj0nIyc7XG4gIGJ1dHRvbi5jbGFzc05hbWUgPSAnZmF2b3JpdGUtdG9nZ2xlJztcbiAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1yZXN0YXVyYW50LWlkJywgcmVzdGF1cmFudC5pZCk7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnc3dpdGNoJyk7XG4gIGNvbnN0IGNoZWNrID0gcmVzdGF1cmFudC5pc19mYXZvcml0ZSA9PT0gJ3RydWUnID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgY2hlY2spO1xuICBidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsICdUb2dnbGUgZmF2b3JpdGUgc3RhdHVzIG9mICcgK1xuICByZXN0YXVyYW50Lm5hbWUpO1xuICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1RvZ2dsZSBmYXZvcml0ZSBzdGF0dXMgb2YgJyArXG4gIHJlc3RhdXJhbnQubmFtZSk7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUZhdm9yaXRlSGFuZGxlcik7XG4gIHJldHVybiBidXR0b247XG59O1xuXG5jb25zdCB0b2dnbGVGYXZvcml0ZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgY29uc3QgcklkID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1yZXN0YXVyYW50LWlkJyk7XG4gIGNvbnN0IGNoZWNrID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJykgPT09ICdmYWxzZSdcbiAgPyAndHJ1ZScgOiAnZmFsc2UnO1xuICBEQkhlbHBlci50b2dnbGVSZXN0YXVyYW50RmF2b3JpdGUocklkLCBjaGVjaylcbiAgLnRoZW4oKCkgPT4ge1xuICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsIGNoZWNrKTtcbiAgfSk7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59O1xuXG5jb25zdCBhZGRSZXZpZXcgPSAoZXZlbnQpID0+IHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRyZXZpZXcnKTtcbiAgY29uc3QgcmV2aWV3ID0ge307XG4gIGNvbnN0IHdhcm4gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXdhcm5pbmcnKTtcbiAgd2Fybi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBjb25zdCBmaWVsZHMgPSBbJ3Jlc3RhdXJhbnRfaWQnLCAnbmFtZScsICdyYXRpbmcnLCAnY29tbWVudHMnXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbCA9IGZpZWxkc1tpXTtcbiAgICBjb25zdCBkb21FbCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9JyR7ZWx9J11gKTtcbiAgICBpZiAoZG9tRWwudmFsaWRhdGlvbk1lc3NhZ2UgIT0gJycpIHtcbiAgICAgIHdhcm4uaW5uZXJIVE1MID0gYEVycm9yIGluICR7ZWx9IGZpZWxkLiAke2RvbUVsLnZhbGlkYXRpb25NZXNzYWdlfWA7XG4gICAgICB3YXJuLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldmlld1tlbF0gPSBkb21FbC52YWx1ZTtcbiAgfTtcbiAgREJIZWxwZXIuYWRkUmVzdGF1cmFudFJldmlldyhyZXZpZXcpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgZm9ybS5yZXNldCgpO1xuICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcbiAgICAgIGNvbnN0IGxpID0gY3JlYXRlUmV2aWV3SFRNTChkYXRhKTtcbiAgICAgIHVsLmluc2VydEJlZm9yZShsaSwgdWwuY2hpbGROb2Rlc1sxXSk7XG4gICAgfSk7XG4gIH0pO1xufTtcbiJdfQ==
