"use strict";function _newArrowCheck(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var currentCache="mws-static-v1",currentImgCache="mws-images-v1",currentCaches=[currentCache,currentImgCache];self.addEventListener("fetch",function(n){_newArrowCheck(this,this);var e=new URL(n.request.url);e.pathname.match("^/restaurants")||(e.pathname.match(/\.jpg$/i)?n.respondWith(servePhoto(n.request)):n.respondWith(caches.match(n.request).then(function(e){return _newArrowCheck(this,this),e||fetch(n.request).then(function(t){return _newArrowCheck(this,this),200===t.status?caches.open(currentCache).then(function(e){return _newArrowCheck(this,this),e.put(n.request,t.clone()),t}.bind(this)):t}.bind(this)).catch(function(e){return _newArrowCheck(this,this),new Response("The requested resource is currently not available, please try again later",{status:404,statusText:e.message})}.bind(this))}.bind(this))))}.bind(void 0)),self.addEventListener("install",function(e){_newArrowCheck(this,this);var t=["/","/js/mainbundle.js","/js/detailsbundle.js","/restaurant.html","/index.html","/css/mainstyles.css","/css/detailsstyles.css"];e.waitUntil(caches.open(currentCache).then(function(e){_newArrowCheck(this,this),e.addAll(t)}.bind(this)))}.bind(void 0)),self.addEventListener("activate",function(e){_newArrowCheck(this,this),e.waitUntil(caches.keys().then(function(e){return _newArrowCheck(this,this),Promise.all(e.filter(function(e){return _newArrowCheck(this,this),e.startsWith("mws-")&&-1===currentCaches.indexOf(e)}.bind(this)).map(function(e){return _newArrowCheck(this,this),caches.delete(e)}.bind(this)))}.bind(this)))}.bind(void 0)),self.servePhoto=function(n){_newArrowCheck(this,this);var s=n.url.replace(/\@\d+\.jpg$/,"");return caches.open(currentImgCache).then(function(t){return _newArrowCheck(this,this),t.match(s).then(function(e){return _newArrowCheck(this,this),e||fetch(n).then(function(e){return _newArrowCheck(this,this),t.put(s,e.clone()),e}.bind(this))}.bind(this))}.bind(this))}.bind(void 0);