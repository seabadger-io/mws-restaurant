"use strict";function _newArrowCheck(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var currentCache="mws-static-v1",currentImgCache="mws-images-v1",currentCaches=[currentCache,currentImgCache];self.addEventListener("fetch",function(n){_newArrowCheck(this,this);var t=new URL(n.request.url);t.pathname.match("^/restaurants")||(t.pathname.match(/\.jpg$/i)?n.respondWith(servePhoto(n.request)):n.respondWith(caches.match(n.request).then(function(t){return _newArrowCheck(this,this),t||fetch(n.request).then(function(e){return _newArrowCheck(this,this),200===e.status?caches.open(currentCache).then(function(t){return _newArrowCheck(this,this),t.put(n.request,e.clone()),e}.bind(this)):e}.bind(this)).catch(function(t){return _newArrowCheck(this,this),new Response("The requested resource is currently not available, please try again later",{status:404,statusText:t.message})}.bind(this))}.bind(this))))}.bind(void 0)),self.addEventListener("install",function(t){_newArrowCheck(this,this);var e=["/","/js/app.js","/js/main.js","/js/restaurant_info.js","/js/dbhelper.js","/data/restaurant.json","/restaurant.html","/index.html","/css/styles.css"];t.waitUntil(caches.open(currentCache).then(function(t){_newArrowCheck(this,this),t.addAll(e)}.bind(this)))}.bind(void 0)),self.addEventListener("activate",function(t){_newArrowCheck(this,this),t.waitUntil(caches.keys().then(function(t){return _newArrowCheck(this,this),Promise.all(t.filter(function(t){return _newArrowCheck(this,this),t.startsWith("mws-")&&-1===currentCaches.indexOf(t)}.bind(this)).map(function(t){return _newArrowCheck(this,this),caches.delete(t)}.bind(this)))}.bind(this)))}.bind(void 0)),self.servePhoto=function(n){_newArrowCheck(this,this);var r=n.url.replace(/\@\d+\.jpg$/,"");return caches.open(currentImgCache).then(function(e){return _newArrowCheck(this,this),e.match(r).then(function(t){return _newArrowCheck(this,this),t||fetch(n).then(function(t){return _newArrowCheck(this,this),e.put(r,t.clone()),t}.bind(this))}.bind(this))}.bind(this))}.bind(void 0);